<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="shortcut icon" href="images/gift.png" type="image/x-icon" />
  <link rel="stylesheet" href="css/style.css" />
  <title>For Bianca üå∑</title>

  <style>
    /* Bottom buttons overlay */
    .gift-controls{
      position: fixed;
      left: 50%;
      bottom: 18px;
      transform: translateX(-50%);
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
      z-index: 9999;
      padding: 10px 12px;
    }
    .gc-btn{
      text-decoration: none;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      font-weight: 800;
      color: #fff;
      padding: 12px 14px;
      border-radius: 14px;
      background: linear-gradient(135deg, #ff80ab, #ff2f55);
      box-shadow: 0 10px 22px rgba(255, 77, 109, 0.22);
      border: 1px solid rgba(255,255,255,0.12);
    }
    .gc-secondary{
      background: rgba(255,255,255,0.10);
      box-shadow: none;
      border: 1px solid rgba(255,255,255,0.14);
    }

    /* Make flowers a bit more ‚Äútulip red‚Äù without breaking animation */
    .flower__leaf{
      background: linear-gradient(180deg, #c1122f, #7a0c1a) !important;
    }
    .flower__white-circle{
      background: rgba(255, 120, 160, 0.35) !important;
    }
    /* ====== UPGRADE FX (cinematic + particles) ====== */
:root{
  --fxGlow: 0 0 18px rgba(255, 80, 120, .30);
  --fxGlow2: 0 0 50px rgba(255, 80, 120, .18);
}

/* Soft vignette + film glow */
.vignette{
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 6;
  background:
    radial-gradient(70% 60% at 50% 45%, rgba(0,0,0,0) 0%, rgba(0,0,0,.25) 65%, rgba(0,0,0,.55) 100%);
}

/* Canvas sits on top but doesn't block clicks */
#fxCanvas{
  position: fixed;
  inset: 0;
  z-index: 5;
  pointer-events: none;
}

/* Make the tulips feel more alive (stronger sway + gentle bob) */
.flowers, .tulips, .bouquet, .garden {  /* (covers different class names) */
  filter: drop-shadow(var(--fxGlow)) drop-shadow(var(--fxGlow2));
}

/* Bottom buttons (safe, clean, mobile friendly) */
.bottomActions{
  position: fixed;
  left: 50%;
  bottom: 18px;
  transform: translateX(-50%);
  z-index: 10;
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  justify-content: center;
  padding: 10px 12px;
  border-radius: 16px;
  background: rgba(10,10,22,.35);
  border: 1px solid rgba(255,120,160,.20);
  backdrop-filter: blur(10px);
}

.btnFx{
  appearance: none;
  border: 0;
  cursor: pointer;
  padding: 10px 14px;
  border-radius: 14px;
  font-weight: 700;
  letter-spacing: .2px;
  color: #fff;
  background: rgba(255, 90, 130, .22);
  border: 1px solid rgba(255, 120, 160, .30);
  box-shadow: 0 10px 25px rgba(0,0,0,.25);
  transition: transform .15s ease, background .15s ease;
}
.btnFx:hover{ transform: translateY(-2px); background: rgba(255, 90, 130, .28); }
.btnFx.secondary{ background: rgba(255,255,255,.08); border-color: rgba(255,255,255,.16); }
    
/* ‚úÖ Make stem + leaf parts green (the white ones you see) */
.flower__line{
  background: #2e9b57 !important;   /* main stem line */
}

.flower__line__leaf{
  background: #34b46a !important;   /* the side leaves */
}

/* Optional: add a tiny highlight so it looks alive */
.flower__line__leaf::after{
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: linear-gradient(90deg, rgba(255,255,255,.18), rgba(255,255,255,0));
  pointer-events: none;
}
/* ===== FIX: make stem + stem leaves green ===== */

/* main stem */
.flower__line{
  background: linear-gradient(180deg, #2e9b57, #1f6f3d) !important;
}

/* leaves on the stem */
.flower__line__leaf{
  background: linear-gradient(180deg, #3fcf7f, #2e9b57) !important;
}

/* remove white highlight glow */
.flower__line__leaf::after{
  background: none !important;
}

/* REMOVE white circle glow */
.flower__white-circle{
  display: none !important;
}
/* FIX: connect tulip head to stem */
.flower__leafs--1,
.flower__leafs--2,
.flower__leafs--3{
  top: 10px !important;
}
  </style>
</head>

<body class="not-loaded">
  <div class="night"></div>

  <!-- ORIGINAL ANIMATION STRUCTURE -->
  <div class="flowers">
    <div class="flower flower--1">
      <div class="flower__leafs flower__leafs--1">
        <div class="flower__leaf flower__leaf--1"></div>
        <div class="flower__leaf flower__leaf--2"></div>
        <div class="flower__leaf flower__leaf--3"></div>
        <div class="flower__leaf flower__leaf--4"></div>
        <div class="flower__white-circle"></div>

        <div class="flower__light flower__light--1"></div>
        <div class="flower__light flower__light--2"></div>
        <div class="flower__light flower__light--3"></div>
        <div class="flower__light flower__light--4"></div>
        <div class="flower__light flower__light--5"></div>
        <div class="flower__light flower__light--6"></div>
        <div class="flower__light flower__light--7"></div>
        <div class="flower__light flower__light--8"></div>
      </div>

      <div class="flower__line">
        <div class="flower__line__leaf flower__line__leaf--1"></div>
        <div class="flower__line__leaf flower__line__leaf--2"></div>
        <div class="flower__line__leaf flower__line__leaf--3"></div>
        <div class="flower__line__leaf flower__line__leaf--4"></div>
        <div class="flower__line__leaf flower__line__leaf--5"></div>
        <div class="flower__line__leaf flower__line__leaf--6"></div>
      </div>
    </div>

    <div class="flower flower--2">
      <div class="flower__leafs flower__leafs--2">
        <div class="flower__leaf flower__leaf--1"></div>
        <div class="flower__leaf flower__leaf--2"></div>
        <div class="flower__leaf flower__leaf--3"></div>
        <div class="flower__leaf flower__leaf--4"></div>
        <div class="flower__white-circle"></div>

        <div class="flower__light flower__light--1"></div>
        <div class="flower__light flower__light--2"></div>
        <div class="flower__light flower__light--3"></div>
        <div class="flower__light flower__light--4"></div>
        <div class="flower__light flower__light--5"></div>
        <div class="flower__light flower__light--6"></div>
        <div class="flower__light flower__light--7"></div>
        <div class="flower__light flower__light--8"></div>
      </div>

      <div class="flower__line">
        <div class="flower__line__leaf flower__line__leaf--1"></div>
        <div class="flower__line__leaf flower__line__leaf--2"></div>
        <div class="flower__line__leaf flower__line__leaf--3"></div>
        <div class="flower__line__leaf flower__line__leaf--4"></div>
      </div>
    </div>

    <div class="flower flower--3">
      <div class="flower__leafs flower__leafs--3">
        <div class="flower__leaf flower__leaf--1"></div>
        <div class="flower__leaf flower__leaf--2"></div>
        <div class="flower__leaf flower__leaf--3"></div>
        <div class="flower__leaf flower__leaf--4"></div>
        <div class="flower__white-circle"></div>

        <div class="flower__light flower__light--1"></div>
        <div class="flower__light flower__light--2"></div>
        <div class="flower__light flower__light--3"></div>
        <div class="flower__light flower__light--4"></div>
        <div class="flower__light flower__light--5"></div>
        <div class="flower__light flower__light--6"></div>
        <div class="flower__light flower__light--7"></div>
        <div class="flower__light flower__light--8"></div>
      </div>

      <div class="flower__line">
        <div class="flower__line__leaf flower__line__leaf--1"></div>
        <div class="flower__line__leaf flower__line__leaf--2"></div>
        <div class="flower__line__leaf flower__line__leaf--3"></div>
        <div class="flower__line__leaf flower__line__leaf--4"></div>
      </div>
    </div>

    <!-- keep the rest exactly as your original file has it
         (grass / long-g etc). If your original tulips file has more,
         paste it in here exactly. -->
  </div>

  <h1 class="title"><span id="title"></span></h1>

  <!-- Buttons -->
  <div class="gift-controls">
    <a class="gc-btn" href="letters.html">üíå Read my main letter for you</a>
    <a class="gc-btn gc-secondary" href="../100-days/index.html">‚¨Ö Go back</a>
  </div>
<canvas id="fxCanvas"></canvas>
<div class="vignette"></div>

<div class="bottomActions">
  <!-- Change href if your letters file name is different -->
  <a class="btnFx" href="./letters.html">Read my main letter üíå</a>
  <button class="btnFx secondary" onclick="history.back()">Go back ‚Ü©Ô∏è</button>
</div>

<script>
/* ====== Fireflies + Hearts + Petals (WOW but still lightweight) ====== */
(() => {
  const c = document.getElementById('fxCanvas');
  const ctx = c.getContext('2d', { alpha: true });
  let W=0,H=0, DPR=1;

  function resize(){
    DPR = Math.min(2, window.devicePixelRatio || 1);
    W = Math.floor(innerWidth);
    H = Math.floor(innerHeight);
    c.width = Math.floor(W * DPR);
    c.height = Math.floor(H * DPR);
    c.style.width = W + 'px';
    c.style.height = H + 'px';
    ctx.setTransform(DPR,0,0,DPR,0,0);
  }
  addEventListener('resize', resize, { passive:true });
  resize();

  const rand = (a,b)=>a+Math.random()*(b-a);

  // Fireflies
  const fireflies = Array.from({length: 28}, () => ({
    x: rand(0,W), y: rand(0,H),
    r: rand(1.2, 2.8),
    vx: rand(-0.15, 0.15),
    vy: rand(-0.08, 0.10),
    a: rand(0.15, 0.70),
    tw: rand(0, Math.PI*2),
  }));

  // Hearts bubbles
  const hearts = Array.from({length: 12}, () => spawnHeart());

  function spawnHeart(){
    return {
      x: rand(0,W),
      y: rand(H*0.55, H+80),
      s: rand(10, 22),
      vy: rand(-0.55, -0.25),
      vx: rand(-0.18, 0.18),
      a: rand(0.18, 0.45),
      w: rand(-0.02, 0.02),
      rot: rand(-0.6, 0.6)
    };
  }

  // Falling petals (subtle, ‚Äúeffort‚Äù feel)
  const petals = Array.from({length: 16}, () => spawnPetal());
  function spawnPetal(){
    return {
      x: rand(0,W),
      y: rand(-H, 0),
      vy: rand(0.35, 0.85),
      vx: rand(-0.25, 0.25),
      rot: rand(0, Math.PI*2),
      vr: rand(-0.02, 0.02),
      s: rand(8, 16),
      a: rand(0.10, 0.22)
    };
  }

  function drawHeart(x,y,s,rot,alpha){
    ctx.save();
    ctx.translate(x,y);
    ctx.rotate(rot);
    ctx.globalAlpha = alpha;
    ctx.fillStyle = 'rgba(255,120,160,1)';
    ctx.beginPath();
    const k = s/18;
    // simple heart path
    ctx.moveTo(0, 6*k);
    ctx.bezierCurveTo(0, -2*k, -10*k, -2*k, -10*k, 6*k);
    ctx.bezierCurveTo(-10*k, 12*k, -3*k, 16*k, 0, 20*k);
    ctx.bezierCurveTo(3*k, 16*k, 10*k, 12*k, 10*k, 6*k);
    ctx.bezierCurveTo(10*k, -2*k, 0, -2*k, 0, 6*k);
    ctx.closePath();
    ctx.shadowColor = 'rgba(255,120,160,.35)';
    ctx.shadowBlur = 12;
    ctx.fill();
    ctx.restore();
  }

  function drawPetal(p){
    ctx.save();
    ctx.translate(p.x, p.y);
    ctx.rotate(p.rot);
    ctx.globalAlpha = p.a;
    ctx.fillStyle = 'rgba(255, 90, 130, 1)';
    ctx.shadowColor = 'rgba(255, 90, 130, .25)';
    ctx.shadowBlur = 10;
    ctx.beginPath();
    // petal shape
    ctx.ellipse(0, 0, p.s*0.55, p.s, 0, 0, Math.PI*2);
    ctx.fill();
    ctx.restore();
  }

  let t = 0;
  function loop(){
    t += 0.016;
    ctx.clearRect(0,0,W,H);

    // Fireflies
    for(const f of fireflies){
      f.tw += 0.03;
      f.x += f.vx + Math.sin(f.tw)*0.08;
      f.y += f.vy + Math.cos(f.tw)*0.06;

      if(f.x < -20) f.x = W+20;
      if(f.x > W+20) f.x = -20;
      if(f.y < -20) f.y = H+20;
      if(f.y > H+20) f.y = -20;

      const pulse = 0.5 + 0.5*Math.sin(f.tw*1.6);
      ctx.globalAlpha = f.a * (0.45 + 0.55*pulse);
      ctx.fillStyle = 'rgba(255, 230, 140, 1)';
      ctx.shadowColor = 'rgba(255, 230, 140, .65)';
      ctx.shadowBlur = 14;
      ctx.beginPath();
      ctx.arc(f.x, f.y, f.r, 0, Math.PI*2);
      ctx.fill();
    }

    // Hearts (slow drift upward)
    for(let i=0;i<hearts.length;i++){
      const h = hearts[i];
      h.x += h.vx;
      h.y += h.vy;
      h.rot += h.w;
      drawHeart(h.x, h.y, h.s, h.rot, h.a);

      if(h.y < -80){
        hearts[i] = spawnHeart();
        hearts[i].y = H+80;
      }
    }

    // Petals (falling gently)
    for(let i=0;i<petals.length;i++){
      const p = petals[i];
      p.x += p.vx + Math.sin(t + p.y*0.01)*0.18;
      p.y += p.vy;
      p.rot += p.vr;
      drawPetal(p);

      if(p.y > H+40){
        petals[i] = spawnPetal();
        petals[i].y = -40;
      }
      if(p.x < -40) p.x = W+40;
      if(p.x > W+40) p.x = -40;
    }

    requestAnimationFrame(loop);
  }
  loop();
})();
</script>

  <script src="js/main.js"></script>
</body>
</html>
